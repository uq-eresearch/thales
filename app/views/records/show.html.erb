<% 
   title = @data.title[0]
   display_title = (title.nil? || title.blank?) ? '(untitled)' : title
 %>
<% content_for(:page_title) do display_title end %>
<% content_for(:page_heading) do display_title end %>

<p id="notice"><%= notice %></p>

<!-- <%= @record.uuid %> -->

<div id="show">

  <% case @record.ser_type
     when Thales::Datamodel::E_RESEARCH_COLLECTION %>
  <p>COLLECTION</p>
  <%= show_group(@data, "Admin", :subtype) %>
  <%= show_group(@data, "General information",
      :title, :title_alt, :description, :identifier) %>
  <%= show_group(@data, "Tags",
      :tag_keyword, :tag_FoR, :tag_SEO) %>
  <%= show_group(@data, "Other",
      :contact_email, :web_page) %>
  <%= show_group(@data, "Coverage",
      :temporal, :spatial_geoname, :spatial_point, :spatial_polygon) %>
  <%= show_group(@data, "Rights",
      :rights_access, :rights_statement, :rights_licence) %>
  <%= show_group(@data, "Related records",
      :createdBy, :managedBy, :accessedVia, :referencedBy) %>

  <% when Thales::Datamodel::E_RESEARCH_PARTY %>
  <p>PARTY</p>
  <%= show_group(@data, "Admin", :subtype) %>
  <%= show_group(@data, "Name",
      :name_prefix, :name_given, :name_family) %>
  <%= show_group(@data, "General information",
      :title, :title_alt, :description, :identifier) %>
  <%= show_group(@data, "Tags",
      :tag_keyword, :tag_FoR, :tag_SEO) %>
  <%= show_group(@data, "Other",
      :contact_email, :web_page) %>
  <%= show_group(@data, "Related records",
      :creatorFor, :managerFor, :operatorFor, :participantIn, :authorOf) %>

  <% when Thales::Datamodel::E_RESEARCH_ACTIVITY %>
  <p>ACTIVITY</p>
  <%= show_group(@data, "Admin", :subtype) %>
  <%= show_group(@data, "General information",
      :title, :title_alt, :description, :identifier) %>
  <%= show_group(@data, "Tags",
      :tag_keyword, :tag_FoR, :tag_SEO) %>
  <%= show_group(@data, "Other",
      :contact_email, :web_page) %>
  <%= show_group(@data, "Coverage",
      :temporal) %>
  <%= show_group(@data, "Related records",
      :hasParticipant, :producerFor) %>

  <% when Thales::Datamodel::E_RESEARCH_SERVICE %>
  <p>SERVICE</p>
  <%= show_group(@data, "Admin", :subtype) %>
  <%= show_group(@data, "General information",
      :title, :title_alt, :description, :identifier) %>
  <%= show_group(@data, "Tags",
      :tag_keyword, :tag_FoR, :tag_SEO) %>
  <%= show_group(@data, "Other",
      :contact_email, :web_page) %>
  <%= show_group(@data, "Related records",
      :operatedBy, :providesAccessTo) %>

  <% else %>
  <p>Internal error: show view: unknown record type</p>
  <% end %>

  <%= show_all(@data) %>

  <div id="editActions">
  <%=
    # Edit button
 
    form_tag(edit_record_path(@record), :method => :get) do 
      submit_tag('Edit this record')
    end
  %>
  </div>

  <%= link_to "RIF-CS version", record_path(@record, :rifcs) %>

  <p id="updatedTime" title="<%= @record.updated_at.iso8601 %>">Last updated: <%= @record.updated_at.to_s(:rfc822) %></p>
</div>


<% content_for(:navigation) { side_nav_bar(:records) } %>
